<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Hour Tracker Admin</title>
    <link rel="icon" type="image/x-icon" href="./images/favicon/favicon.ico">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/vars.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./images/favicon/favicon.ico">
</head>
<body>
    <header>
        <h1 id="welcome"></h1>
    </header>

    <main>
        <img src="#" id="academy">
        
        <section id="users">
            <header>
                <h1>Requested Hours</h1>
            </header>
        </section>
    </main>

    <script>
        let username = localStorage.getItem("username");
        var json_user = false;
        let url = `./users/${username}/${username}.json`;
        var client = new XMLHttpRequest();
        client.open('GET', url);
        client.onloadend = function() {
            json_user = client.responseText;
            continue_function()
        }
        client.send();

        // now for the formatting stuff
        function continue_function() {
            let user = JSON.parse(json_user);
            document.getElementById("welcome").innerText = `Welcome, ${user.full_name}!`
            document.getElementById("academy").src = `./images/academy/${user.academy}.png`
        }
    </script>
</body>
</html>